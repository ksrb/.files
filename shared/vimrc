" Settings {
    set nocompatible           " Use Vim settings, over Vi settings, has side effects must be set as early as possible

    syntax on                  " Turn on syntax highlighting
    syntax sync minlines=256   " Start parsing for syntax highlighting 256 lines before buffer
    set synmaxcol=150          " Stop syntax higlighting after 150 cols

    set exrc                   " Allow local (./) specific vimrc
    set secure                 " Disable unsafe commands in local .vimrc files

    set background=dark        " Color Theme
    set completeopt=menu       " Show completion options as dropdown list
    set relativenumber         " Show line numbers relative to cursor
    set number                 " Show line numbers
    set colorcolumn=80         " Color the 80th column (max line width for code)
    set ruler                  " Show the cursor position all the time
    set nowrap                 " Prevent word wrapping on long lines
    set incsearch              " Shows the match while typing
    set hlsearch               " Highlight found searches
    set laststatus=2           " Always display the status line
    set showmode               " Show the current mode
    set nocursorcolumn         " Speed up syntax highlighting
    set nocursorline           " Don't highlight line cursor is on

    set history=50             " Set search and command history to 50
    set nobackup               " Stop vim from creating a backup file before overwriting
    set nowritebackup          " Stop vim from creating a backup before writing
    set noswapfile             " http://robots.thoughtbot.com/post/18739402579/global-gitignore#comment-458413287
    set showcmd                " Display incomplete commands
    set autowrite              " Automatically :write before running commands
    set mouse=a                " Enable mouse use in all modes
    set splitbelow             " Horizontal splits with open to the bottom
    set splitright             " Vertical splits with open to the right
    set timeoutlen=1000        " Set timeout waiting for mapped keys (<Leader>) to 1sec i.e.
    set ttimeoutlen=0          " Set timeout waiting for keycodes (<ESC>) to 0
    set iminsert=0             " Disable capslock
    set backspace=2            " Backspace deletes like most programs in insert mode

    set tabstop=2              " Softtabs, 2 spaces
    set shiftwidth=2           " Set >>, << to use 2 spaces
    set shiftround
    set expandtab              " Insert spaces when tab is pressed

    set ttyfast                " Fast terminal connecion improves responsiveness

    set re=1                   " Use old regex engine
" }

" Wildmenu {
    set wildmenu
    set wildmode=list:longest
    set wildmode=list:full
    set wildignore+=*.hg,*.git,*.svn                 " Version control
    set wildignore+=*.aux,*.out,*.toc                " LaTeX intermediate files
    set wildignore+=*.jpg,*.bmp,*.gif,*.png,*.jpeg   " Binary images
    set wildignore+=*.o,*.obj,*.exe,*.dll,*.manifest " compiled object files
    set wildignore+=*.spl                            " compiled spelling word lists
    set wildignore+=*.sw?                            " Vim swap files
    set wildignore+=*.DS_Store                       " OSX bullshit
    set wildignore+=*.luac                           " Lua byte code
    set wildignore+=migrations                       " Django migrations
    set wildignore+=go/pkg                           " Go static files
    set wildignore+=go/bin                           " Go bin files
    set wildignore+=go/bin-vagrant                   " Go bin-vagrant files
    set wildignore+=*.pyc                            " Python byte code
    set wildignore+=*.orig                           " Merge resolution files
" }

" FileType {
    filetype plugin on "Load plugin files for specific file types
    filetype indent on "File type specific indents

    au FileType make setlocal noet
    au FileType markdown,gitcommit set spell

    au BufNewFile,BufRead *.vim setlocal ts=2 sw=2 sts=2
    au BufNewFile,BufRead *.txt setlocal noet ts=2 sw=2
    au BufNewFile,BufRead *.md setlocal noet ts=2 sw=2

    augroup filetypedetect
      au BufNewFile,BufRead .tmux.conf*,tmux.conf* setf tmux
    augroup END
" }

" Misc {
    let mapleader = ","                  " Leader key to ','
    autocmd BufWritePost .vimrc source % " Autoreload vimrc on change
    autocmd FileType qf wincmd J         " Move quickfix window to the bottom
" }

" Bindings {
    " Strip Trailing Whitespace & turn off hightlighting
    nnoremap <Leader>kw :%s/\s\+$//e<CR>:noh<CR>

    " Remove search highlight
    nnoremap <leader><space> :nohlsearch<CR>

    " Redraw screen
    noremap <F5> :redraw!<CR>
" }

" Load plugins
if filereadable(expand("~/.vimrc.bundles"))
  source ~/.vimrc.bundles
endif

" OS specific config
if filereadable(expand("~/.vimrc.oss"))
  source ~/.vimrc.oss
endif

" Local config
if filereadable(expand("/.vimrc.local"))
  source ~/.vimrc.local
endif
